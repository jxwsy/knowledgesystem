# join理解

表student

	+-----------+-------+------+------+-------+
	| sno       | sname | ssex | sage | sdept |
	+-----------+-------+------+------+-------+
	| 201215121 | 李勇  | 男   |   20 | CS    |
	| 201215122 | 刘晨  | 女   |   19 | CS    |
	| 201215123 | 王敏  | 女   |   18 | MA    |
	| 201215125 | 张立  | 男   |   19 | IS    |
	+-----------+-------+------+------+-------+

表sc

	+-----------+------+-------+
	| sno       | cno  | grade |
	+-----------+------+-------+
	| 201215121 |    1 |    92 |
	| 201215121 |    2 |    85 |
	| 201215121 |    3 |    88 |
	| 201215122 |    1 |    90 |
	| 201215122 |    2 |    80 |
	+-----------+------+-------+

### 1、左外连接:以JOIN关键字左边的表为基准

```sql
SELECT * FROM student LEFT OUTER JOIN sc ON student.sno=sc.sno;
SELECT * FROM student LEFT JOIN sc ON student.sno=sc.sno;
```
以表student为基准

	+-----------+-------+------+------+-------+-----------+------+-------+
	| sno       | sname | ssex | sage | sdept | sno       | cno  | grade |
	+-----------+-------+------+------+-------+-----------+------+-------+
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    1 |    92 |
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    2 |    85 |
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    3 |    88 |
	| 201215122 | 刘晨  | 女   |   19 | CS    | 201215122 |    1 |    90 |
	| 201215122 | 刘晨  | 女   |   19 | CS    | 201215122 |    2 |    80 |
	| 201215123 | 王敏  | 女   |   18 | MA    | NULL      | NULL |  NULL |
	| 201215125 | 张立  | 男   |   19 | IS    | NULL      | NULL |  NULL |
	+-----------+-------+------+------+-------+-----------+------+-------+

### 2、右外连接:以JOIN关键字右边的表为基准

```sql
SELECT * FROM sc RIGHT OUTER JOIN student ON student.sno=sc.sno;
```

以student为基准

注意sc和student换了位置

	+-----------+------+-------+-----------+-------+------+------+-------+
	| sno       | cno  | grade | sno       | sname | ssex | sage | sdept |
	+-----------+------+-------+-----------+-------+------+------+-------+
	| 201215121 |    1 |    92 | 201215121 | 李勇  | 男   |   20 | CS    |
	| 201215121 |    2 |    85 | 201215121 | 李勇  | 男   |   20 | CS    |
	| 201215121 |    3 |    88 | 201215121 | 李勇  | 男   |   20 | CS    |
	| 201215122 |    1 |    90 | 201215122 | 刘晨  | 女   |   19 | CS    |
	| 201215122 |    2 |    80 | 201215122 | 刘晨  | 女   |   19 | CS    |
	| NULL      | NULL |  NULL | 201215123 | 王敏  | 女   |   18 | MA    |
	| NULL      | NULL |  NULL | 201215125 | 张立  | 男   |   19 | IS    |
	+-----------+------+-------+-----------+-------+------+------+-------+


在MySQL中，OUTER关键字在MySQL中可省略 

	LEFT JOIN=LEFT OUTER JOIN，RIGHT JOIN=RIGHT OUTER JOIN

### 3、全外连接:以JOIN关键字左右两边的表为基准

MySQL不支持全外连接，但是可以用集合查询做到，即将左外连接的查询结果和右外连接的查询结果做UNION ALL操作。

```sql
SELECT * FROM sc FULL JOIN student ON student.sno=sc.sno;

ERROR 1054 (42S22): Unknown column 'sc.sno' in 'on clause'
```

```sql
-- 注意是UNION ALL，而非UNION，UNION有个去重效果
SELECT * FROM student LEFT OUTER JOIN sc ON student.sno=sc.sno
UNION ALL
SELECT * FROM student RIGHT OUTER JOIN sc ON student.sno=sc.sno;
```

	+-----------+-------+------+------+-------+-----------+------+-------+
	| sno       | sname | ssex | sage | sdept | sno       | cno  | grade |
	+-----------+-------+------+------+-------+-----------+------+-------+
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    1 |    92 |
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    2 |    85 |
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    3 |    88 |
	| 201215122 | 刘晨  | 女   |   19 | CS    | 201215122 |    1 |    90 |
	| 201215122 | 刘晨  | 女   |   19 | CS    | 201215122 |    2 |    80 |
	| 201215123 | 王敏  | 女   |   18 | MA    | NULL      | NULL |  NULL |
	| 201215125 | 张立  | 男   |   19 | IS    | NULL      | NULL |  NULL |
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    1 |    92 |
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    2 |    85 |
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    3 |    88 |
	| 201215122 | 刘晨  | 女   |   19 | CS    | 201215122 |    1 |    90 |
	| 201215122 | 刘晨  | 女   |   19 | CS    | 201215122 |    2 |    80 |


### 4、内连接

```sql
SELECT * FROM student INNER JOIN sc ON student.sno=sc.sno;   
SELECT * FROM student JOIN sc ON student.sno=sc.sno;
SELECT * FROM student CROSS JOIN sc USING(sno);
```

	+-----------+-------+------+------+-------+-----------+------+-------+
	| sno       | sname | ssex | sage | sdept | sno       | cno  | grade |
	+-----------+-------+------+------+-------+-----------+------+-------+
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    1 |    92 |
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    2 |    85 |
	| 201215121 | 李勇  | 男   |   20 | CS    | 201215121 |    3 |    88 |
	| 201215122 | 刘晨  | 女   |   19 | CS    | 201215122 |    1 |    90 |
	| 201215122 | 刘晨  | 女   |   19 | CS    | 201215122 |    2 |    80 |
	+-----------+-------+------+------+-------+-----------+------+-------+


### 5、总结

内连接

	从数学的角度讲就是求两个表的交集，从笛卡尔积的角度讲就是从笛卡尔积中挑出ON子句条件成立的记录。

外连接

	外连接的存在可以弥补内连接仅匹配符合条件的元组的缺陷,
	
	也就是说，内连接仅能查询出两个表中符合连接条件的元组，而外连接可以在某种程度上弥补这种缺陷。

原文链接：

[SQL查询语句分类](https://www.cnblogs.com/fudashi/p/6572101.html)

[MySQL的JOIN（一）：用法](https://www.cnblogs.com/fudashi/p/7491039.html)